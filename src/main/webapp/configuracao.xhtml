<ui:composition template="/WEB-INF/template/layout.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="barra">
        <div class="row" id="stylebarra">
            <i class="pi pi-exclamation-circle" id="icon"></i> <h5 style="color: #e1e6e5"> Alertas </h5>
        </div>
    </ui:define>
    <ui:define name="corpo">

        <h:panelGroup id="contratadoPanelGroup" style="padding: 30px !important">
            <p:growl id="messages" showDetail="true" />
            <h:panelGroup id="dadosGeraisPanelGroup" >
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <p:outputLabel value="Quantos dias para expirar "
                                           for="diasInput" />
                            <p:inputMask id="diasInput"
                                         placeholder="Dias"
                                         styleClass="form-control" 
                                         value="#{managerConfiguracao.configuracao.diasPraExpirar}"
                                         rendered="true"
                                         requiredMessage="Este campo é obrigatório."
                                         />
                            <p:message for="diasInput" />
                            <p:tooltip for="diasInput" value="Serão exibidos apenas contratos que não estejam com o status de cancelado ou finalizado" position="bottom"/>
                        </div>
                    </div>
                    <div class="col-md-8" style="display: flex;justify-content: end;width: 350px !important">
                        <div class="form-group">
                            <p:commandButton value="Carregar expirados" icon="pi pi-exclamation-triangle" update="corpoInteiro:dataTablePanelGroup messages" actionListener="#{managerConfiguracao.mostrarContratosExpirados()}"/>
                        </div>
                    </div>
                </div>
                <center>
                    <p:commandButton value="Pesquisar" icon="pi pi-search" process="@this corpoInteiro:dadosGeraisPanelGroup" 
                                     update="corpoInteiro:dataTablePanelGroup messages" actionListener="#{managerConfiguracao.pesquisar()}" />
                    <p:commandButton value="Limpar" icon="pi pi-ban" update="corpoInteiro:dadosGeraisPanelGroup corpoInteiro:dataTablePanelGroup" 
                                     process="@this corpoInteiro:dadosGeraisPanelGroup" actionListener="#{managerConfiguracao.init()}"/>
                </center>
                <br/>


            </h:panelGroup>
            <h:panelGroup id="dataTablePanelGroup" >
                <p:accordionPanel  multiple="true" widgetVar="multiple">
                    <p:tab title="Resultado da pesquisa">
                        <p:dataTable id="tipoContratadoDatatable" var="contrato" value="#{managerConfiguracao.contratosPertodeExpirar}"
                                     resizeMode="5">
                            <f:facet name="header">
                                <center>
                                    Contratos
                                </center>
                            </f:facet>
                            <p:column headerText="Ações" width="200">
                                <p:button  icon="pi pi-eye" title="visualizar" href="contrato.xhtml?visualizar=#{contrato.id}" />
                            </p:column>
                            <p:column headerText="Status">
                                <div id="row-atividades" class="row row-atividades" style="display: flex; flex-wrap: nowrap !important; overflow: hidden !important; overflow-x: scroll !important">
                                    <ui:repeat value="#{contrato.status}"
                                               var="atividade">
                                        <div class="atividade">
                                            <div class="ui-avatar ui-widget ui-avatar-circle ui-avatar-xl"
                                                 style="background-color:#{'#'.concat(managerContrato.cores(contrato.status))}; font-size: 15px; color: #ffffff; width: 50px; height: 50px;">
                                                <span class="ui-avatar-text">#{managerContrato.abreviacao(contrato.status)}</span>
                                            </div>
                                        </div>
                                    </ui:repeat>
                                </div>
                            </p:column>
                            <p:column headerText="Número do processo">
                                <h:outputText value="#{contrato.numeroProcesso}" />
                            </p:column>
                            <p:column headerText="Contratado">
                                <h:outputText value="#{contrato.contratado}" />
                            </p:column>
                            <p:column headerText="Valor">
                                <h:outputText value="#{contrato.valor}" />
                            </p:column>
                            <p:column headerText="Termino da vigência">
                                <h:outputText value="#{managerConfiguracao.dataFormatada(contrato.dataFinal) }" />
                            </p:column>
                        </p:dataTable>


                    </p:tab>
                </p:accordionPanel>
            </h:panelGroup>
            <!--            <center>
                            <p:commandButton value="Salvar" icon="pi pi-save" process="contratadoPanelGroup" update="corpoInteiro:messages" actionListener="{managerContratado.salvar()}" rendered="{managerContratado.cadastrar}" />
                            <p:button value="Editar" icon="pi pi-pencil"  rendered="{managerContratado.visualizar}" href="contratado.xhtml?editar={managerContratado.contratado.id}" />
                            <p:commandButton value="Atualizar" icon="pi pi-sync" process="contratadoPanelGroup"  actionListener="{managerContratado.atualizar()}" rendered="{managerContratado.editar}"  />
                            <p:button value="Cancelar" icon="pi pi-ban"  href="contratado.xhtml" rendered="{managerContratado.visualizar}" />
                            <p:button value="Cancelar" icon="pi pi-ban"  href="contratado.xhtml?visualizar={managerContratado.contratado.id}" rendered="{managerContratado.editar}" />
                            <p:button value="Cancelar" icon="pi pi-ban"  href="index.xhtml" rendered="{managerContratado.cadastrar}" />
                        </center>-->
        </h:panelGroup>

    </ui:define>
</ui:composition>