<ui:composition template="/WEB-INF/template/layout.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">
    <ui:define name="corpo">
        <div style="text-align: center">
            <h3>Resumo dos Contratos </h3>
        </div>
        <div style="display: flex; flex-direction: row">
            <div style="width: 300px">        
                <div style="border: none !important">
                    <p:pieChart model="#{graficoPie.pieModel}" style="width: 100px; height: 250px;"/>
                </div>
            </div>
            <div style="width: 70%;margin-left: 40px">
                <p:barChart model="#{graficoPie.barModel}" style="width: 100%; height: 300px;"/>
            </div>
        </div>
        <hr/>
        <h:panelGroup id="pesquisaPanelGroup">
            <div style="display: flex; flex-direction: row">
                <div style="width: 300px">    
                    <div class="p-col-12 p-lg-6 p-xl-4">
                        <div style="border: none !important">
                            <p:polarAreaChart model="#{graficoPie.polarAreaModel}" style="width: 100%; height: 500px;"/>
                        </div>
                    </div>
                </div>
                <div style="display: flex; flex-direction: column">
                    <div class="row" style="width: 100%">
                        <div class="col-md-4">
                            <div class="form-group">
                                <p:outputLabel value="Setor" styleClass="control-label" for="contratoSetor" />
                                <p:autoComplete id="contratoSetor" dropdown="true" converter="setorconverter"
                                                var="setor" itemLabel="#{setor.nome}"
                                                itemValue="#{setor}" value="#{graficoPie.setor}"
                                                scrollHeight="200" forceSelection="true"
                                                inputStyleClass="form-control"
                                                style="display: flex;"
                                                emptyMessage="Setor não encontrado" 
                                                completeMethod="#{managerAutoComplete.autocompleteSetor}"
                                                >
                                    <p:ajax event="itemSelect" />
                                </p:autoComplete>
                            </div> 
                        </div>
                        <div class="col-md-5">
                            <div class="form-group">
                                <p:outputLabel value="Contratado" styleClass="control-label" for="contratoContratado" />
                                <p:autoComplete id="contratoContratado" dropdown="true" converter="contratadoconverter"
                                                var="contratado" itemLabel="#{contratado.nome}"
                                                itemValue="#{contratado}" value="#{graficoPie.contratado}"
                                                scrollHeight="200" forceSelection="true"
                                                inputStyleClass="form-control"
                                                style="display: flex;"
                                                emptyMessage="Contratado não encontrado" 
                                                completeMethod="#{managerAutoComplete.autocompletaContratado}"
                                                >
                                    <p:ajax event="itemSelect" />
                                </p:autoComplete>
                            </div> 
                        </div>
                        <p:commandButton value="Pesquisar" icon="pi pi-search" process="pesquisaPanelGroup @this" update="pesquisaPanelGroup @this" actionListener="#{graficoPie.buscarContratoSetor()}"
                                         style="width: 120px;height: 40px; margin-top: 30px !important" />
                    </div>
                    <p:lineChart model="#{graficoPie.cartesianLinerModel}" style="width: 100%; height: 200px;"/>
                </div>
            </div>
        </h:panelGroup>
        <hr/>
        <div style="display: flex; flex-direction: row">
            <div style="width: 300px">    
                <div class="p-col-12 p-lg-6 p-xl-4" >
                    <div style="border: none !important">
                        <p:radarChart model="#{graficoPie.radarModel}" />
                    </div>
                </div>
            </div>

        </div>
    </ui:define>
    <script type="text/javascript">
        function skinRadarChart() {
            Chart.defaults.startAngle = 36;
            Chart.defaults.plugins.tooltip.cornerRadius = 3;
            Chart.defaults.plugins.tooltip.enabled = true;
            Chart.defaults.plugins.tooltip.mode = 'point';
            Chart.defaults.plugins.tooltip.position = 'nearest';
        }
    </script>
</ui:composition>